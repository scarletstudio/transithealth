(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6156:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},2815:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(5893),i=n(7294),a=n(8911),c=n(2787),s=n(3909),o=n(1084);function u(e){var t=e.width?e.width:e.height?.8*e.height:300,n=e.height?e.height:e.width?e.width/.8:375,u=[t/2,n/2],l=t/300,d=n/375,h=e.scale||4e4*Math.max(l,d),f=e.offsetX||-.0475,p=(0,a.Z)(e.communityAreas),m=[p[0]+f,p[1]],j=(0,c.ZP)().center(m).scale(h).translate(u),v=e.defaultOpacity||1,x=e.onAreaClick?(0,o.D)(100,e.onAreaClick):null,b=e.onAreaHover?(0,o.D)(100,e.onAreaHover):null,_=e.communityAreas.features,g=e.data||{},y=(0,i.useState)(e.selectedAreaNumber),O=y[0],w=y[1];(0,i.useEffect)((function(){w(e.selectedAreaNumber)}),[e.selectedAreaNumber]);var k=["ChicagoMap",Object.keys(g).length>0?"HasData":"NoData"].join(" ");return(0,r.jsx)("div",{className:k,children:(0,r.jsx)("svg",{width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),children:(0,r.jsx)("g",{className:"areas",children:_.map((function(e,t){var n=e.properties,i=g[n.number]||{};return(0,r.jsx)("path",{className:"CommunityArea ".concat(O===n.number?"Selected":""),d:(0,s.Z)().projection(j)(e),fill:i.fill,fillOpacity:i.opacity||v,onClick:function(e){w(n.number),x&&x(n)},onMouseEnter:function(e){b&&b(n)}},"path-".concat(t))}))})})})}},9187:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5893),i=n(1664);function a(){return(0,r.jsxs)("nav",{children:[(0,r.jsx)(i.default,{href:"/",children:"Home"}),(0,r.jsx)(i.default,{href:"/explorer",children:"Explorer"}),(0,r.jsx)(i.default,{href:"/questions",children:"Questions"}),(0,r.jsx)(i.default,{href:"/about",children:"About"})]})}},8047:function(e,t,n){"use strict";n.d(t,{P_:function(){return o},K4:function(){return u},k7:function(){return m}});var r=n(7757),i=n.n(r),a=n(2137),c=n(5893),s=n(7294);function o(e){var t=(0,s.useState)(e.visible||!1),n=t[0],r=t[1],i=e.classes||[],a=n?"block":"hidden";return(0,s.useEffect)((function(){r(e.visible)}),[e.visible]),(0,c.jsxs)("div",{className:"Notification ".concat(i.join(" ")," ").concat(a),children:[(0,c.jsx)("div",{className:"CloseHolder",children:(0,c.jsx)("span",{className:"Close",onClick:function(){r(!1)},children:"x"})}),e.children]})}function u(e){var t=e.data||e.error,n=t&&t.toString(),r=e.classes||["Failure"];return(0,c.jsx)("div",{children:(0,c.jsx)(o,{classes:r,visible:e.error,children:(0,c.jsx)("p",{children:n})})})}function l(){return(l=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){fetch("".concat("https://transithealth.herokuapp.com","/")).then((function(t){e(!0)})).catch((function(t){e(!1)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d="transithealth__last_ping",h="Connecting to our server...",f="Connected successfully!",p="Could not connect. Please reload page.";function m(){var e=(0,s.useState)(!0),t=e[0],n=e[1],r=(0,s.useState)(!0),i=r[0],a=r[1],u=(0,s.useState)(!1),m=u[0],j=u[1];(0,s.useEffect)((function(){var e,t,r=!0,i=localStorage.getItem(d);return(!i||Date.now()-i>=3e5)&&(e=setTimeout((function(){r&&j(!0)}),1e3),function(){return l.apply(this,arguments)}().then((function(e){r&&(a(e),n(!1)),e&&(localStorage.setItem(d,Date.now()),t=setTimeout((function(){r&&j(!1)}),1e3))}))),function(){r=!1,e&&clearTimeout(e),t&&clearTimeout(t)}}),[]);var v=["Bottom","Narrow",t?"":i?"Success":"Failure",!t&&i?"FadeOut":"FadeIn"],x=t?h:i?f:p;return(0,c.jsx)("div",{children:(0,c.jsx)(o,{classes:v,visible:m,children:(0,c.jsx)("p",{children:x})})})}},4792:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return j},default:function(){return v}});var r=n(5893),i=n(9008),a=n(9187),c=n(6156),s=n(7294),o=n(1009),u=n(2815),l=n(8047);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f="".concat("https://transithealth.herokuapp.com","/community/metrics"),p={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:["rideshare_pickups_covid","total_covid_cases"]})};function m(e){var t=e.communityAreas,n=(0,s.useState)({}),i=n[0],a=n[1],c=(0,o.ZP)(f,p,[]),d=(c.loading,c.error),m=c.data,j=m?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t=e.total_covid_cases/(e.rideshare_pickups_covid/1e3);return h(h({},e),{},{cases_per_thousand_trips:t})})),t=e.reduce((function(e,t){return Math.max(t.cases_per_thousand_trips,e)}),0);return e.map((function(e){var n=e.cases_per_thousand_trips/t;return h(h({},e),{},{opacity:Math.max(n,.05)})})).reduce((function(e,t){return e[t.area_number]=t,e}),{})}(m.metrics):null,v=j&&i.number?j[i.number]:{},x=v.name?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[v.cases_per_thousand_trips.toFixed(0)," COVID cases per thousand rideshare pickups"]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{children:[v.total_covid_cases.toLocaleString()," COVID cases"]}),(0,r.jsx)("span",{className:"spacer",children:"/"}),(0,r.jsxs)("span",{children:[v.rideshare_pickups_covid.toLocaleString()," total rideshare pickups since March 2020"]})]})]}):null,b=d?(0,r.jsx)(l.P_,{classes:["Bottom","Wide","Failure","left"],visible:!0,children:(0,r.jsx)("p",{children:"Failed to get data from server. Please reload."})}):null;return(0,r.jsxs)("div",{className:"center",children:[(0,r.jsx)("h2",{children:"COVID Cases per Thousand Rideshare Pickups"}),(0,r.jsx)("p",{children:"Pick a community area from the map."}),(0,r.jsx)(u.Z,{data:j,communityAreas:t,height:400,defaultOpacity:1,onAreaClick:a}),(0,r.jsx)("h3",{children:i.name}),x,b]})}var j=!0;function v(e){var t=e.communityAreas;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:"TransitHealth"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Explore transit and public health data across Chicago."}),(0,r.jsx)("link",{rel:"icon",href:"favicon.ico"})]}),(0,r.jsx)(a.Z,{}),(0,r.jsx)("main",{className:"Home",children:(0,r.jsxs)("div",{className:"page",children:[(0,r.jsxs)("div",{className:"center",children:[(0,r.jsx)("h1",{children:"TransitHealth"}),(0,r.jsx)("p",{children:"Explore public transit and public health data across Chicago."})]}),(0,r.jsx)("br",{}),(0,r.jsx)(m,{communityAreas:t})]})}),(0,r.jsx)(l.k7,{})]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4792)}])}},function(e){e.O(0,[774,351,197,9,376],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);