(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{2815:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),a=n(7294),i=n(8911),o=n(2787),s=n(3909),l=n(1084);function c(e){var t=e.width?e.width:e.height?.8*e.height:300,n=e.height?e.height:e.width?e.width/.8:375,c=[t/2,n/2],u=t/300,m=n/375,d=e.scale||4e4*Math.max(u,m),h=e.offsetX||-.0475,f=(0,i.Z)(e.communityAreas),p=[f[0]+h,f[1]],_=(0,o.ZP)().center(p).scale(d).translate(c),b=e.defaultOpacity||1,x=e.onAreaClick?(0,l.D)(100,e.onAreaClick):null,v=e.onAreaHover?(0,l.D)(100,e.onAreaHover):null,j=e.communityAreas.features,y=e.data||{},D=(0,a.useState)(e.selectedAreaNumber),g=D[0],W=D[1];(0,a.useEffect)((function(){W(e.selectedAreaNumber)}),[e.selectedAreaNumber]);var C=["ChicagoMap",Object.keys(y).length>0?"HasData":"NoData"].join(" ");return(0,r.jsx)("div",{className:C,children:(0,r.jsx)("svg",{width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),children:(0,r.jsx)("g",{className:"areas",children:j.map((function(e,t){var n=e.properties,a=y[n.number]||{};return(0,r.jsx)("path",{className:"CommunityArea ".concat(g===n.number?"Selected":""),d:(0,s.Z)().projection(_)(e),fill:a.fill,fillOpacity:a.opacity||b,onClick:function(e){W(n.number),x&&x(n)},onMouseEnter:function(e){v&&v(n)}},"path-".concat(t))}))})})})}},9187:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),a=n(1664);function i(){return(0,r.jsxs)("nav",{children:[(0,r.jsx)(a.default,{href:"/",children:"Home"}),(0,r.jsx)(a.default,{href:"/explorer",children:"Explorer"}),(0,r.jsx)(a.default,{href:"/questions",children:"Questions"}),(0,r.jsx)(a.default,{href:"/about",children:"About"})]})}},8047:function(e,t,n){"use strict";n.d(t,{P_:function(){return l},K4:function(){return c},k7:function(){return p}});var r=n(7757),a=n.n(r),i=n(2137),o=n(5893),s=n(7294);function l(e){var t=(0,s.useState)(e.visible||!1),n=t[0],r=t[1],a=e.classes||[],i=n?"block":"hidden";return(0,s.useEffect)((function(){r(e.visible)}),[e.visible]),(0,o.jsxs)("div",{className:"Notification ".concat(a.join(" ")," ").concat(i),children:[(0,o.jsx)("div",{className:"CloseHolder",children:(0,o.jsx)("span",{className:"Close",onClick:function(){r(!1)},children:"x"})}),e.children]})}function c(e){var t=e.data||e.error,n=t&&t.toString(),r=e.classes||["Failure"];return(0,o.jsx)("div",{children:(0,o.jsx)(l,{classes:r,visible:e.error,children:(0,o.jsx)("p",{children:n})})})}function u(){return(u=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){fetch("".concat("https://transithealth.herokuapp.com","/")).then((function(t){e(!0)})).catch((function(t){e(!1)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m="transithealth__last_ping",d="Connecting to our server...",h="Connected successfully!",f="Could not connect. Please reload page.";function p(){var e=(0,s.useState)(!0),t=e[0],n=e[1],r=(0,s.useState)(!0),a=r[0],i=r[1],c=(0,s.useState)(!1),p=c[0],_=c[1];(0,s.useEffect)((function(){var e,t,r=!0,a=localStorage.getItem(m);return(!a||Date.now()-a>=3e5)&&(e=setTimeout((function(){r&&_(!0)}),1e3),function(){return u.apply(this,arguments)}().then((function(e){r&&(i(e),n(!1)),e&&(localStorage.setItem(m,Date.now()),t=setTimeout((function(){r&&_(!1)}),1e3))}))),function(){r=!1,e&&clearTimeout(e),t&&clearTimeout(t)}}),[]);var b=["Bottom","Narrow",t?"":a?"Success":"Failure",!t&&a?"FadeOut":"FadeIn"],x=t?d:a?h:f;return(0,o.jsx)("div",{children:(0,o.jsx)(l,{classes:b,visible:p,children:(0,o.jsx)("p",{children:x})})})}},2183:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return M},default:function(){return I}});var r=n(5893),a=n(9008),i=n(9187),o=n(7757),s=n.n(o),l=n(6156),c=n(2137),u=n(7294),m=n(2815);function d(e){var t=e.supportedMetrics,n=e.onClose,a=e.selectMetric;return e.show?(0,r.jsx)("div",{className:"SelectorModal",onClick:n,children:(0,r.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[(0,r.jsx)("div",{className:"modal-header",children:(0,r.jsx)("h4",{className:"modal-title",children:"Select your Metric"})}),(0,r.jsx)("div",{className:"modal-body",children:(0,r.jsx)("span",{children:Object.keys(t).map((function(e,i){return(0,r.jsx)("p",{onClick:function(){a(e),n()},children:t[e].name},i)}))})}),(0,r.jsx)("div",{className:"modal-footer",children:(0,r.jsx)("button",{className:"closeButton",onClick:n,children:"Close"})})]})}):null}function h(e){var t=e.label,n=e.supportedMetrics,a=e.defaultValue,i=e.onChange,o=(0,u.useState)(0),s=o[0],l=o[1],c=(0,u.useState)(a),m=c[0],h=c[1];return(0,r.jsxs)("div",{className:"SearchableMetricSelector",children:[(0,r.jsxs)("div",{className:"SelectorBody",children:[t?(0,r.jsxs)("span",{className:"bold selectorLabel",children:[t,": "]}):null,(0,r.jsx)("button",{className:"selectorButton",onClick:function(){return l(1)},children:n[m].name})]}),(0,r.jsx)(d,{supportedMetrics:n,onClose:function(){return l(0)},selectMetric:function(e){i(e),h(e)},show:s})]})}var f=n(3743),p=n(9009),_=n(7478),b=n(4195),x=n(3023),v=n(5048),j=n(5358),y=n(9307),D=n(9746),g=n(3815);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=f.fH,N=f.QA.metricX,O=f.QA.metricY;function S(e,t){return F.apply(this,arguments)}function F(){return(F=(0,c.Z)(s().mark((function e(t,n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://transithealth.herokuapp.com","/community/metrics"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:[t,n]})});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,r=e.filter((function(e){return e[t]})).reduce((function(e,n){return Math.max(e,n[t])}),e[0][t]),a=e.reduce((function(e,a){var i=(a[t]||0)/r;return e[a.area_number]=C(C({},a),{},{opacity:Math.max(n,i)}),e}),{});return a}function T(e){var t,n=e.active,a=e.payload,i=(e.label,e.metrics),o=(null===a||void 0===a||null===(t=a[0])||void 0===t?void 0:t.payload)||{},s=i.filter((function(e){return!(e in o)})).length>0;return n&&o&&!s?(0,r.jsxs)("div",{className:"CustomToolTip",children:[(0,r.jsx)("h4",{children:o.name}),(0,r.jsxs)("p",{children:["Community Area ",o.area_number," (",o.part,")"]}),i.map((function(e,t){return(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{children:[k[e].name,": "]}),(0,r.jsxs)("span",{children:[k[e].format(o[e])," "]}),(0,r.jsx)("span",{children:k[e].units})]},t)}))]}):null}function A(e){var t,n=e.data,a=e.metricX,i=e.metricY,o=e.width,s=e.height,c=e.onHover,u=e.selectedAreaData,m=k[a],d=k[i],h=n||[(t={},(0,l.Z)(t,a,0),(0,l.Z)(t,i,0),t)],f=function(e,t){var n="".concat(e.name," (").concat(e.units,")");return n.length<=t?n:n.slice(0,t)+"..."};return(0,r.jsx)(p.h,{width:o,height:s,children:(0,r.jsxs)(_.G,{margin:{left:50,right:10,bottom:30,top:30},children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3"}),(0,r.jsx)(x.K,{dataKey:a,type:"number",tickFormatter:m.format,children:(0,r.jsx)(v._,{value:f(m,60),position:"bottom",offset:15})}),(0,r.jsx)(j.B,{dataKey:i,type:"number",tickFormatter:d.format,children:(0,r.jsx)(v._,{value:f(d,35),position:"left",angle:-90,offset:25,style:{textAnchor:"middle"}})}),(0,r.jsx)(y.u,{content:(0,r.jsx)(T,{metrics:[a,i]})}),(0,r.jsx)(D.b,{name:"Community Area",data:h,onMouseOver:c,onMouseOut:function(){return c({area_number:-1})},children:h.map((function(e,t){var n=e.area_number===u.area_number?"selected":"";return(0,r.jsx)(g.b,{className:n},t)}))})]})})}function R(e){var t=e.communityAreas,n=(0,u.useState)(null),a=n[0],i=n[1],o=(0,u.useState)(N),l=o[0],d=o[1],f=(0,u.useState)(O),p=f[0],_=f[1],b=(0,u.useState)(!1),x=b[0],v=b[1],j=(0,u.useState)(-1),y=j[0],D=j[1],g=(0,u.useState)({}),W=g[0],C=g[1],F=W[y]||{},T=k[l],R=k[p];return(0,u.useEffect)((function(){var e=!0;function t(){return(t=(0,c.Z)(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,S(l,p);case 3:n=t.sent,r=w(n.metrics,p),e&&(i(n.metrics),C(r),v(!1));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return D(-1),C({}),function(){t.apply(this,arguments)}(),function(){return e=!1}}),[l,p]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:W&&y>0?F.name:"By Community Area"}),(0,r.jsxs)("div",{className:"SelectorContainer",children:[(0,r.jsx)(h,{label:"X Axis",supportedMetrics:k,defaultValue:l,onChange:d}),(0,r.jsx)("span",{children:F[l]?"".concat(T.fullFormat(F[l])," ").concat(T.units):""}),(0,r.jsx)("span",{className:"spacer",children:" "}),(0,r.jsx)("br",{}),(0,r.jsx)(h,{label:"Y Axis",supportedMetrics:k,defaultValue:p,onChange:_}),(0,r.jsx)("span",{children:F[p]?"".concat(R.fullFormat(F[p])," ").concat(R.units):""}),(0,r.jsx)("span",{className:"spacer",children:" "}),(0,r.jsx)("span",{children:x?"Loading data...":""})]}),(0,r.jsxs)("div",{className:"PlotRow",children:[(0,r.jsx)(A,{data:a,metricX:l,metricY:p,width:"65%",height:450,onHover:function(e){e.area_number!==y&&D(e.area_number)},selectedAreaData:F}),(0,r.jsxs)("div",{className:"ScatterMap",children:[(0,r.jsx)(m.Z,{data:W,communityAreas:t,height:410,defaultOpacity:1,selectedAreaNumber:y,onAreaClick:function(e){e.number!==y&&D(e.number)}}),(0,r.jsx)("p",{className:"center MapLabel",children:R.name})]})]})]})}var P=n(8047),M=!0;function I(e){var t=e.communityAreas;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(a.default,{children:[(0,r.jsx)("title",{children:"TransitHealth"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Explore transit and public health data across Chicago."}),(0,r.jsx)("link",{rel:"icon",href:"favicon.ico"})]}),(0,r.jsx)(i.Z,{}),(0,r.jsx)("main",{className:"Scatter",children:(0,r.jsxs)("div",{className:"page",children:[(0,r.jsx)("div",{className:"center",children:(0,r.jsx)("h1",{children:"Scatter View"})}),(0,r.jsx)(R,{communityAreas:t})]})}),(0,r.jsx)(P.k7,{})]})}},3743:function(e,t,n){"use strict";n.d(t,{gB:function(){return a},Mb:function(){return i},fH:function(){return o},Ov:function(){return s},QA:function(){return l},mv:function(){return c}});var r=Intl.NumberFormat("en-US");function a(e,t){return(t-e)/e}var i={numberWithCommas:function(e){return r.format(e)},numberInThousands:function(e){return r.format((e/1e3).toFixed(1))+"K"},numberInMillions:function(e){return r.format((e/1e6).toFixed(1))+"M"},percentWithNoDecimal:function(e){return(100*e).toFixed(0)+"%"},percentWithOneDecimal:function(e){return(100*e).toFixed(1)+"%"},dollarsUSD:function(e){return"$"+e.toFixed(2)},dollarsUSDWithCommas:function(e){return"$".concat(r.format(Math.floor(e)))},dollarsUSDInThousands:function(e){return"$".concat(r.format((e/1e3).toFixed(1)),"K")},centsToDollarsUSD:function(e){return"$"+(e/100).toFixed(2)},percentChangeWithNoDecimal:function(e){return(e>=0?"+":"")+(100*e).toFixed(0)+"%"},percentChangeWithOneDecimal:function(e){return(e>=0?"+":"")+(100*e).toFixed(1)+"%"}},o={rideshare_pickups_covid:{name:"Rideshare Pickups Since March 2020",units:"trips",format:i.numberInMillions,fullFormat:i.numberWithCommas},rideshare_pooled_trip_rate_2018:{name:"2018 Rideshare Pooled Trip Rate",units:"of trips",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},rideshare_pooled_trip_rate_2019:{name:"2019 Rideshare Pooled Trip Rate",units:"of trips",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},rideshare_pool_request_rate_2018:{name:"2018 Rideshare Pool Request Rate",units:"of trips",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},rideshare_pool_request_rate_2019:{name:"2019 Rideshare Pool Request Rate",units:"of trips",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},total_population_2000:{name:"2000 Total Population",units:"people",format:i.numberInThousands,fullFormat:i.numberWithCommas},total_population_2010:{name:"2010 Total Population",units:"people",format:i.numberInThousands,fullFormat:i.numberWithCommas},total_population_2019:{name:"2019 Total Population",units:"people",format:i.numberInThousands,fullFormat:i.numberWithCommas},median_income_2010:{name:"2010 Median Income",units:"dollars",format:i.dollarsUSDInThousands,fullFormat:i.dollarsUSDWithCommas},median_income_2017:{name:"2017 Median Income",units:"dollars",format:i.dollarsUSDInThousands,fullFormat:i.dollarsUSDWithCommas},median_income_2018:{name:"2018 Median Income",units:"dollars",format:i.dollarsUSDInThousands,fullFormat:i.dollarsUSDWithCommas},median_income_2019:{name:"2019 Median Income",units:"dollars",format:i.dollarsUSDInThousands,fullFormat:i.dollarsUSDWithCommas},total_covid_cases:{name:"Total COVID Cases",units:"cases",format:i.numberInThousands,fullFormat:i.numberWithCommas},disability_rate_2018:{name:"2018 Disability Rate",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},disability_rate_2019:{name:"2019 Disability Rate",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},belonging_rate_2017:{name:"2017 Rate of Belonging",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},belonging_rate_2018:{name:"2018 Rate of Belonging",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},rent_burdened_2017:{name:"2017 Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},rent_burdened_2018:{name:"2018 Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},rent_burdened_2019:{name:"2019 Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},rent_max:{name:"Maximum Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},rent_min:{name:"Minimum Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},rent_average:{name:"Average Rate of Rent Burdened Households",units:"of households",format:i.percentWithOneDecimal,fullFormat:i.percentWithOneDecimal},avg_speed_per_dropoff:{name:"Average Taxi Trip Speed Per Dropoff Area",units:"mph",format:i.numberWithCommas,fullFormat:i.numberWithCommas},avg_speed_per_pickup:{name:"Average Taxi Trip Speed Per Pickup Area",units:"mph",format:i.numberWithCommas,fullFormat:i.numberWithCommas}},s={weekly_rideshare_pickups:{name:"Weekly Rideshare Pickups",units:"trips",format:i.numberInThousands,fullFormat:i.numberWithCommas},weekly_rideshare_pickups_covid:{name:"Weekly Rideshare Pickups Since March 2020",units:"trips",format:i.numberInThousands,fullFormat:i.numberWithCommas},weekly_rideshare_avg_cost:{name:"Weekly Rideshare Avg. Cost",units:"USD",format:i.centsToDollarsUSD,fullFormat:i.centsToDollarsUSD},weekly_rideshare_avg_cost_covid:{name:"Weekly Rideshare Avg. Cost Since March 2020",units:"USD",format:i.centsToDollarsUSD,fullFormat:i.centsToDollarsUSD},weekly_covid_cases:{name:"Weekly COVID Cases",units:"cases",format:i.numberWithCommas,fullFormat:i.numberWithCommas},yearly_belonging_rate_all:{name:"Rate of Belonging of the City",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},yearly_belonging_rate_W:{name:"Rate of Belonging of Non-Hispanic White People",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},yearly_belonging_rate_B:{name:"Rate of Belonging of Non-Hispanic Black People",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},yearly_belonging_rate_A:{name:"Rate of Belonging of Asian or Pacific Islander People",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},yearly_belonging_rate_H:{name:"Rate of Belonging of Hispanic or Latino People",units:"of people",format:i.percentWithNoDecimal,fullFormat:i.percentWithOneDecimal},weekly_cta_train_ridership:{name:"Weekly CTA Train Ridership",units:"trips",format:i.numberWithCommas,fullFormat:i.numberWithCommas},weekly_cta_train_ridership_covid:{name:"Weekly CTA Train Ridership Since COVID-19",units:"trips",format:i.numberWithCommas,fullFormat:i.numberWithCommas},daily_sidewalk_cafe_permit:{name:"Daily Sidewalk Cafe Permits",units:"permits",format:i.numberWithCommas,fullFormat:i.numberWithCommas},yearly_sidewalk_cafe_permit:{name:"Yearly Sidewalk Cafe Permits",units:"permits",format:i.numberWithCommas,fullFormat:i.numberWithCommas}},l={metricX:"total_population_2019",metricY:"total_covid_cases"},c={metricToAdd:"weekly_rideshare_pickups",defaultMetrics:[{id:"weekly_rideshare_pickups",axis:"left"},{id:"weekly_covid_cases",axis:"right"}]}},5624:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scatter",function(){return n(2183)}])}},function(e){e.O(0,[774,351,197,700,376,478],(function(){return t=5624,e(e.s=t);var t}));var t=e.O();_N_E=t}]);