(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{2815:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(5893),a=n(7294),c=n(8911),s=n(2787),i=n(3909),o=n(1084);function u(e){var t=e.width?e.width:e.height?.8*e.height:300,n=e.height?e.height:e.width?e.width/.8:375,u=[t/2,n/2],l=t/300,h=n/375,m=e.scale||4e4*Math.max(l,h),d=e.offsetX||-.0475,f=(0,c.Z)(e.communityAreas),p=[f[0]+d,f[1]],x=(0,s.ZP)().center(p).scale(m).translate(u),j=e.defaultOpacity||1,b=e.onAreaClick?(0,o.D)(100,e.onAreaClick):null,v=e.onAreaHover?(0,o.D)(100,e.onAreaHover):null,y=e.communityAreas.features,g=e.data||{},_=(0,a.useState)(e.selectedAreaNumber),N=_[0],w=_[1];(0,a.useEffect)((function(){w(e.selectedAreaNumber)}),[e.selectedAreaNumber]);var O=["ChicagoMap",Object.keys(g).length>0?"HasData":"NoData"].join(" ");return(0,r.jsx)("div",{className:O,children:(0,r.jsx)("svg",{width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),children:(0,r.jsx)("g",{className:"areas",children:y.map((function(e,t){var n=e.properties,a=g[n.number]||{};return(0,r.jsx)("path",{className:"CommunityArea ".concat(N===n.number?"Selected":""),d:(0,i.Z)().projection(x)(e),fill:a.fill,fillOpacity:a.opacity||j,onClick:function(e){w(n.number),b&&b(n)},onMouseEnter:function(e){v&&v(n)}},"path-".concat(t))}))})})})}},9187:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),a=n(1664);function c(){return(0,r.jsxs)("nav",{children:[(0,r.jsx)(a.default,{href:"/",children:"Home"}),(0,r.jsx)(a.default,{href:"/explorer",children:"Explorer"}),(0,r.jsx)(a.default,{href:"/questions",children:"Questions"}),(0,r.jsx)(a.default,{href:"/about",children:"About"})]})}},8405:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return D},default:function(){return F}});var r=n(7757),a=n.n(r),c=n(5893),s=n(6156),i=n(2137),o=n(9008),u=n(7294),l=n(9009),h=n(8717),m=n(4195),d=n(3023),f=n(5048),p=n(5358),x=n(9307),j=n(9864),b=n(3815),v=n(9187),y=n(2815);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){return new Intl.NumberFormat("en").format(e)}function w(e){return new Intl.NumberFormat("en").format((e/1e3).toFixed(1))+"K"}var O={rideshare_total_pickups:{name:"Total Rideshare Pickups",units:"trips",format:function(e){return new Intl.NumberFormat("en").format((e/1e6).toFixed(1))+"M"},fullFormat:N},total_population_2000:{name:"2000 Total Population",units:"people",format:w,fullFormat:N},total_population_2010:{name:"2010 Total Population",units:"people",format:w,fullFormat:N}};function A(e,t){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)(a().mark((function e(t,n){var r,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://transithealth.herokuapp.com","/community/metrics"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:[t,n]})});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,r=e.reduce((function(e,n){return Math.max(e,n[t])}),e[0][t]),a=e.reduce((function(e,a){var c=a[t]/r;return e[a.area_number]=_(_({},a),{},{opacity:Math.max(n,c)}),e}),{});return a}function P(e){var t=e.active,n=e.payload,r=(e.label,e.metrics);e.selectedPayload;if(!t||!n||0===n.length)return null;var a=n[0].payload;return(0,c.jsxs)("div",{className:"CustomToolTip",children:[(0,c.jsx)("h4",{children:a.name}),(0,c.jsxs)("p",{children:["Community Area ",a.area_number," (",a.part,")"]}),r.map((function(e,t){return(0,c.jsxs)("p",{children:[(0,c.jsxs)("span",{children:[O[e].name,": "]}),(0,c.jsxs)("span",{children:[O[e].format(a[e])," "]}),(0,c.jsx)("span",{children:O[e].units})]},t)}))]})}function S(e){var t,n=e.data,r=e.metricX,a=e.metricY,i=e.width,o=e.height,u=e.onHover,v=e.selectedAreaData,y=O[r],g=O[a],_=n||[(t={},(0,s.Z)(t,r,0),(0,s.Z)(t,a,0),t)];return(0,c.jsx)(l.h,{width:i,height:o,children:(0,c.jsxs)(h.G,{margin:{left:30,right:30,bottom:30,top:30},children:[(0,c.jsx)(m.q,{strokeDasharray:"3 3"}),(0,c.jsx)(d.K,{dataKey:r,type:"number",tickFormatter:y.format,children:(0,c.jsx)(f._,{value:"".concat(y.name," (").concat(y.units,")"),position:"bottom",offset:10})}),(0,c.jsx)(p.B,{dataKey:a,type:"number",tickFormatter:g.format,children:(0,c.jsx)(f._,{value:"".concat(g.name," (").concat(g.units,")"),position:"left",angle:-90,offset:10,style:{textAnchor:"middle"}})}),(0,c.jsx)(x.u,{content:(0,c.jsx)(P,{metrics:[r,a]})}),(0,c.jsx)(j.b,{name:"Community Area",data:_,onMouseOver:u,onMouseOut:function(){return u({area_number:-1})},children:_.map((function(e,t){var n=e.area_number===v.area_number?"selected":"";return(0,c.jsx)(b.b,{className:n},t)}))})]})})}function E(e){var t=e.label,n=e.defaultValue,r=e.onChange;return(0,c.jsxs)("div",{className:"MetricSelector",children:[t?(0,c.jsxs)("span",{className:"bold",children:[t,": "]}):null,(0,c.jsx)("span",{children:(0,c.jsx)("select",{defaultValue:n,onChange:function(e){var t=e.target.value;r&&r(t)},children:Object.keys(O).map((function(e,t){return(0,c.jsx)("option",{value:e,children:O[e].name},t)}))})})]})}var D=!0;function F(e){var t=e.communityAreas,n=(0,u.useState)(null),r=n[0],s=n[1],l=(0,u.useState)("total_population_2000"),h=l[0],m=l[1],d=(0,u.useState)("total_population_2010"),f=d[0],p=d[1],x=(0,u.useState)(!1),j=x[0],b=x[1],g=(0,u.useState)(-1),_=g[0],N=g[1],w=(0,u.useState)({}),k=w[0],P=w[1],D=k[_]||{},F=O[h],Z=O[f];return(0,u.useEffect)((function(){var e=!0;function t(){return(t=(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,A(h,f);case 3:n=t.sent,r=C(n.metrics,f),e&&(s(n.metrics),P(r),b(!1));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return N(-1),P({}),function(){t.apply(this,arguments)}(),function(){return e=!1}}),[h,f]),(0,c.jsxs)("div",{children:[(0,c.jsxs)(o.default,{children:[(0,c.jsx)("title",{children:"TransitHealth"}),(0,c.jsx)("meta",{name:"description",content:"Explore transit and public health data across Chicago."}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsx)(v.Z,{}),(0,c.jsx)("main",{className:"Explorer",children:(0,c.jsxs)("div",{className:"page",children:[(0,c.jsxs)("div",{className:"center",children:[(0,c.jsx)("h1",{children:"Data Explorer"}),(0,c.jsx)("p",{children:"Select a community area to compare transit and public health metrics."})]}),(0,c.jsx)("br",{}),(0,c.jsx)("h2",{children:k&&_>0?D.name:"By Community Area"}),(0,c.jsxs)("div",{className:"SelectorContainer",children:[(0,c.jsx)(E,{label:"X Axis",onChange:m,defaultValue:h}),(0,c.jsx)("span",{children:D[h]?"".concat(F.fullFormat(D[h])," ").concat(F.units):""}),(0,c.jsx)("span",{className:"spacer",children:" "}),(0,c.jsx)(E,{label:"Y Axis",onChange:p,defaultValue:f}),(0,c.jsx)("span",{children:D[f]?"".concat(Z.fullFormat(D[f])," ").concat(Z.units):""}),(0,c.jsx)("span",{className:"spacer",children:" "}),(0,c.jsx)("span",{children:j?"Loading data...":""})]}),(0,c.jsxs)("div",{className:"PlotRow",children:[(0,c.jsx)(S,{data:r,metricX:h,metricY:f,width:"65%",height:450,onHover:function(e){e.area_number!==_&&N(e.area_number)},selectedAreaData:D}),(0,c.jsxs)("div",{children:[(0,c.jsx)(y.Z,{data:k,communityAreas:t,height:410,defaultOpacity:1,selectedAreaNumber:_,onAreaClick:function(e){e.number!==_&&N(e.number)}}),(0,c.jsx)("p",{className:"center",children:Z.name})]})]})]})})]})}},5491:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/explorer",function(){return n(8405)}])}},function(e){e.O(0,[774,351,996,120,370],(function(){return t=5491,e(e.s=t);var t}));var t=e.O();_N_E=t}]);