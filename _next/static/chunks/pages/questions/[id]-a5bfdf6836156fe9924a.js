(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{9187:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),a=r(1664);function o(){return(0,n.jsxs)("nav",{children:[(0,n.jsx)(a.default,{href:"/",children:"Home"}),(0,n.jsx)(a.default,{href:"/explorer",children:"Explorer"}),(0,n.jsx)(a.default,{href:"/questions",children:"Questions"}),(0,n.jsx)(a.default,{href:"/about",children:"About"})]})}},8047:function(e,t,r){"use strict";r.d(t,{P_:function(){return c},K4:function(){return l},k7:function(){return f}});var n=r(7757),a=r.n(n),o=r(2137),i=r(5893),s=r(7294);function c(e){var t=(0,s.useState)(e.visible||!1),r=t[0],n=t[1],a=e.classes||[],o=r?"block":"hidden";return(0,s.useEffect)((function(){n(e.visible)}),[e.visible]),(0,i.jsxs)("div",{className:"Notification ".concat(a.join(" ")," ").concat(o),children:[(0,i.jsx)("div",{className:"CloseHolder",children:(0,i.jsx)("span",{className:"Close",onClick:function(){n(!1)},children:"x"})}),e.children]})}function l(e){var t=e.data||e.error,r=t&&t.toString(),n=e.classes||["Failure"];return(0,i.jsx)("div",{children:(0,i.jsx)(c,{classes:n,visible:e.error,children:(0,i.jsx)("p",{children:r})})})}function u(){return(u=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){fetch("".concat("https://transithealth.herokuapp.com","/")).then((function(t){e(!0)})).catch((function(t){e(!1)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p="transithealth__last_ping",d="Connecting to our server...",m="Connected successfully!",h="Could not connect. Please reload page.";function f(){var e=(0,s.useState)(!0),t=e[0],r=e[1],n=(0,s.useState)(!0),a=n[0],o=n[1],l=(0,s.useState)(!1),f=l[0],_=l[1];(0,s.useEffect)((function(){var e,t,n=!0,a=localStorage.getItem(p);return(!a||Date.now()-a>=3e5)&&(e=setTimeout((function(){n&&_(!0)}),1e3),function(){return u.apply(this,arguments)}().then((function(e){n&&(o(e),r(!1)),e&&(localStorage.setItem(p,Date.now()),t=setTimeout((function(){n&&_(!1)}),1e3))}))),function(){n=!1,e&&clearTimeout(e),t&&clearTimeout(t)}}),[]);var b=["Bottom","Narrow",t?"":a?"Success":"Failure",!t&&a?"FadeOut":"FadeIn"],j=t?d:a?m:h;return(0,i.jsx)("div",{children:(0,i.jsx)(c,{classes:b,visible:f,children:(0,i.jsx)("p",{children:j})})})}},4614:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return z},default:function(){return G}});var n=r(5893),a=r(9008),o=(r(1664),r(9187)),i=r(8047),s=r(7294);var c=r(6156),l=r(1009),u=r(9009),p=r(2931),d=r(6208),m=r(3815),h=r(9307),f=r(3872),_="#263238",b="#332288",j="#1978AD",g="#117733",x="#CC6677",y=r(3743);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D="".concat("https://transithealth.herokuapp.com","/fake/data/example-pie-chart"),w={rail:{name:"CTA Rail",color:g},bus:{name:"CTA Bus",color:j},rideshare:{name:"Rideshare",color:b},"e-scooter":{name:"E-Scooter",color:x}},O={name:"?",totalTripsFormatted:"?"};function k(e){var t=e.data;return(0,n.jsx)(u.h,{width:"100%",height:400,children:(0,n.jsxs)(p.u,{width:400,height:400,margin:{bottom:30},children:[(0,n.jsx)(d.b,{data:t,nameKey:"name",dataKey:"total_trips_2019",label:!0,cx:"50%",cy:"50%",fill:"",outerRadius:150,children:t.map((function(e,t){return(0,n.jsx)(m.b,{fill:e.color},"cell-".concat(t))}))}),(0,n.jsx)(h.u,{}),(0,n.jsx)(f.D,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{bottom:-10}})]})})}var S=r(4699),T=r(4831),N=r(4195),P=r(3023),W=r(5048),F=r(5358),A=r(7226),R=r(7329);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){var t=e.data,r=e.col,a=t[r.key],o=r.format?r.format(a):a,i=r.rowClasses?"Cell "+r.rowClasses.join(" "):"Cell",s={background:r.rgb?r.alpha?"rgba(".concat(r.rgb,", ").concat(r.alpha(a),")"):"rgb(".concat(r.rgb,")"):"transparent"};return(0,n.jsx)("td",{className:i,style:s,children:o})}function B(e){var t=e.data,r=e.cols;return(0,n.jsx)("tr",{children:r.map((function(e,r){return(0,n.jsx)(E,{data:t,col:e},r)}))})}function U(e){var t=e.cols,r=e.sortCol,a=e.sortAsc,o=e.sortByCol,i=t.reduce((function(e,t){return e||t.group}),!1),s=t.filter((function(e){return e.group})).reduce((function(e,t){return M(M({},e),{},(0,c.Z)({},t.group,(e[t.group]||0)+1))}),{}),l=t.filter((function(e){return e.group})).reduce((function(e,t){return M(M({},e),{},(0,c.Z)({},t.group,t.key))}),{}),u=t.filter((function(e){return!e.group||l[e.group]===e.key})),p=i?(0,n.jsx)("tr",{children:u.map((function(e,t){var r=s[e.group]||1;return(0,n.jsx)("th",{className:"GroupHeader",colSpan:r,children:e.group},t)}))}):null;return(0,n.jsxs)("thead",{children:[p,(0,n.jsx)("tr",{children:t.map((function(e,t){return(0,n.jsxs)("th",{className:r===e.key?"Sorted":"",onClick:function(t){o(e.key)},children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("span",{className:"SortArrow",children:a?"\u25bc":"\u25b2"})]},t)}))})]})}function Z(e){var t=(0,R.Z)(e.rows),r=(0,s.useState)(null),a=r[0],o=r[1],i=(0,s.useState)(!1),c=i[0],l=i[1],u=(0,s.useState)(0),p=u[0],d=u[1];var m=null!==a?t.sort((function(e,t){var r=e[a],n=t[a];return r.localeCompare&&n.localeCompare?c?r.localeCompare(n):n.localeCompare(r):c?r-n:n-r})):(0,R.Z)(t);return(0,n.jsx)("div",{className:"TableContainer",children:(0,n.jsxs)("table",{children:[(0,n.jsx)(U,{cols:e.cols,sortCol:a,sortAsc:c,sortByCol:function(e){e==a?p>=2?(o(null),l(!1),d(0)):(l(!c),d(p+1)):(o(e),l(!1),d(1))}}),(0,n.jsx)("tbody",{children:m.map((function(t,r){return(0,n.jsx)(B,{data:t,cols:e.cols},r)}))})]})})}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H="".concat("https://transithealth.herokuapp.com","/question/pooled_trips"),L={Central:"#332288","Far North Side":"#1978AD","Far Southeast Side":"#117733","Far Southwest Side":"#44AA99","North Side":"#88CCEE","Northwest Side":"#DCA139","South Side":"#CC6677","Southwest Side":"#AA4499","West Side":"#882255"},V=[{key:"area_number",group:"Pickup Community Area",name:"#"},{key:"name",group:"Pickup Community Area",name:"Name"},{key:"part",group:"Pickup Community Area",name:"Part"},{key:"pooled_trip_rate_before",group:"Pooled Trips",name:"% of Trips",format:y.Mb.percentWithOneDecimal,rowClasses:["right"]},{key:"avg_trips_per_day_before",group:"Trips/Day",name:"Before",format:y.Mb.numberWithCommas,rowClasses:["right"]},{key:"avg_trips_per_day_since",group:"Trips/Day",name:"Since",format:y.Mb.numberWithCommas,rowClasses:["right"]},{key:"pct_change_avg_trips",group:"Trips/Day",name:"Change",format:y.Mb.percentChangeWithNoDecimal,rowClasses:["right"],rgb:"136, 34, 85",alpha:function(e){return e/-.8}},{key:"avg_cost_per_trip_cents_before",group:"Cost/Trip",name:"Before",format:y.Mb.centsToDollarsUSD,rowClasses:["right"]},{key:"avg_cost_per_trip_cents_since",group:"Cost/Trip",name:"Since",format:y.Mb.centsToDollarsUSD,rowClasses:["right"]},{key:"pct_change_avg_cost",group:"Cost/Trip",name:"Change",format:y.Mb.percentChangeWithNoDecimal,rowClasses:["right"],rgb:"17, 119, 51",alpha:function(e){return e/.3}}];function Q(e){if(e){var t=function(e){return e.map((function(e){return K(K({},e),{},{pct_change_avg_trips:(0,y.gB)(e.avg_trips_per_day_before,e.avg_trips_per_day_since),pct_change_avg_cost:(0,y.gB)(e.avg_cost_per_trip_cents_before,e.avg_cost_per_trip_cents_since)})}))}(e.metrics),r=function(e){return e.sort((function(e,t){return t.pooled_trip_rate_before-e.pooled_trip_rate_before})).sort((function(e,t){return e.part.localeCompare(t.part)})).map((function(e){return K(K({},e),{},(0,c.Z)({},e.part,e.pooled_trip_rate_before))}))}(t);return[t,r]}return[[],[]]}function X(e){var t=e.data;return(0,n.jsx)(u.h,{width:"100%",height:400,children:(0,n.jsxs)(T.v,{data:t,margin:{left:30,right:30,bottom:30,top:30},children:[(0,n.jsx)(N.q,{strokeDashArray:"3 3"}),(0,n.jsx)(P.K,{dataKey:"name",tick:{dy:5},children:(0,n.jsx)(W._,{value:"Pickup Community Area",position:"bottom",offset:10})}),(0,n.jsx)(F.B,{type:"number",tickFormatter:y.Mb.percentWithNoDecimal,children:(0,n.jsx)(W._,{value:"Pooled Trip Rate",position:"left",angle:-90,offset:15,style:{textAnchor:"middle"}})}),(0,n.jsx)(h.u,{formatter:function(e,t,r){return[y.Mb.percentWithOneDecimal(e),"Pooled Trip Rate",r]}}),Object.keys(L).map((function(e,t){return(0,n.jsx)(A.$,{dataKey:e,stackId:"a",fill:L[e]},t)})),(0,n.jsx)(f.D,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{top:5}})]})})}var $={sample:function(){return(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:"This question is still under development. Check back soon!"})})},"template-with-pie-chart":function(e){var t=(0,l.ZP)(D,{},[]),r=t.loading,a=t.error,o=t.data,c=function(e,t){if(!e||t)return{chartData:[],mostTrips:O};var r=e.results.map((function(e){return C(C(C({},e),w[e.transit_mode]||{name:e.transit_mode,color:_}),{},{totalTripsFormatted:y.Mb.numberInMillions(e.total_trips_2019)})})),n=r.reduce((function(e,t){return t.total_trips_2019>e.total_trips_2019?t:e}),{total_trips_2019:0});return{chartData:r,mostTrips:n}}(o,a),u=c.chartData,p=c.mostTrips;return(0,s.useEffect)((function(){e.setContentIsLoading(r)}),[r]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"center medium-width",children:[(0,n.jsx)("h2",{children:"Total Trips by Transit Type"}),(0,n.jsx)("p",{children:"How do people get around the city?"}),(0,n.jsx)(i.K4,{error:a,data:o})]}),(0,n.jsxs)("div",{className:"center",children:[(0,n.jsx)(k,{data:u}),(0,n.jsx)("br",{})]}),(0,n.jsx)("div",{className:"center medium-width",children:(0,n.jsxs)("p",{children:[(0,n.jsxs)("span",{children:["Based on (fake) data from 2019, ",p.name," is the most popular transit mode, "]}),(0,n.jsxs)("span",{children:["with ",p.totalTripsFormatted," annual trips."]})]})})]})},"pooled-trips":function(e){var t=(0,l.ZP)(H,{},[]),r=t.loading,a=t.error,o=Q(t.data),c=(0,S.Z)(o,2),u=c[0],p=c[1];(0,s.useEffect)((function(){e.setContentIsLoading(r)}),[r]);var d=a?(0,n.jsx)(i.P_,{classes:["Bottom","Wide","Failure"],visible:!0,children:(0,n.jsx)("p",{children:"Failed to get data from server. Please reload."})}):null,m=u.sort((function(e,t){return t.pooled_trip_rate_before-e.pooled_trip_rate_before})),h=m[0],f=m[m.length-1],_=m.length>1?(0,n.jsxs)("p",{className:"center",children:[(0,n.jsx)("span",{className:"bold",children:h.name}),(0,n.jsx)("span",{children:" has the highest rate of pooled trips ("}),(0,n.jsx)("span",{className:"bold",children:y.Mb.percentWithOneDecimal(h.pooled_trip_rate_before)}),(0,n.jsx)("span",{children:") while "}),(0,n.jsx)("span",{className:"bold",children:f.name}),(0,n.jsx)("span",{children:" has the lowest ("}),(0,n.jsx)("span",{className:"bold",children:y.Mb.percentWithOneDecimal(f.pooled_trip_rate_before)}),(0,n.jsx)("span",{children:")."})]}):null;return(0,n.jsxs)("div",{className:"QuestionPooledTrips",children:[(0,n.jsxs)("div",{className:"center medium-width",children:[(0,n.jsx)("h2",{children:"Pooled Trip Rates by Community Area"}),(0,n.jsx)("p",{children:"This chart shows the percentage of all rides that were pooled in the year before COVID, by community area where the rider was picked up."})]}),(0,n.jsx)(X,{data:p}),_,(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"center medium-width",children:[(0,n.jsx)("h2",{children:"Change Since COVID"}),(0,n.jsx)("p",{children:"This table shows how the average number of trips per day and average cost per trip has changed in each community area since COVID."}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"bold",children:"Before"}),(0,n.jsx)("span",{children:" is the 12-month period from February 2019-2020."})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"bold",children:"After"}),(0,n.jsx)("span",{children:" is the 12-month period from March 2020-2021."})]})]}),(0,n.jsx)(Z,{rows:u,cols:V}),d]})}};var z=!0;function G(e){var t=(0,s.useState)(!0),r=t[0],c=t[1],l=$[e.component];return(0,n.jsxs)("div",{children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)("title",{children:"TransitHealth"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("meta",{name:"description",content:"Explore transit and public health data across Chicago."}),(0,n.jsx)("link",{rel:"icon",href:"favicon.ico"})]}),(0,n.jsx)(o.Z,{}),(0,n.jsx)("main",{className:"QuestionLayout",children:(0,n.jsxs)("div",{className:"page",children:[(0,n.jsxs)("div",{className:"center medium-width",children:[(0,n.jsx)("h1",{children:e.title}),(0,n.jsxs)("p",{children:["By ",e.author]}),(0,n.jsx)("p",{children:e.description}),(0,n.jsx)("hr",{})]}),(0,n.jsx)("div",{className:r?"block":"hidden",children:(0,n.jsx)("p",{className:"center",children:"Loading..."})}),(0,n.jsx)("div",{className:r?"hidden":"block",children:(0,n.jsx)(l,{setContentIsLoading:c})}),(0,n.jsx)("br",{})]})}),(0,n.jsx)(i.k7,{})]})}},3743:function(e,t,r){"use strict";r.d(t,{gB:function(){return a},Mb:function(){return o},fH:function(){return i},xR:function(){return s},QA:function(){return c},mv:function(){return l}});var n=Intl.NumberFormat("en-US");function a(e,t){return(t-e)/e}var o={numberWithCommas:function(e){return n.format(e)},numberInThousands:function(e){return n.format((e/1e3).toFixed(1))+"K"},numberInMillions:function(e){return n.format((e/1e6).toFixed(1))+"M"},percentWithNoDecimal:function(e){return(100*e).toFixed(0)+"%"},percentWithOneDecimal:function(e){return(100*e).toFixed(1)+"%"},dollarsUSD:function(e){return"$"+e.toFixed(2)},centsToDollarsUSD:function(e){return"$"+(e/100).toFixed(2)},percentChangeWithNoDecimal:function(e){return(e>=0?"+":"")+(100*e).toFixed(0)+"%"},percentChangeWithOneDecimal:function(e){return(e>=0?"+":"")+(100*e).toFixed(1)+"%"}},i={rideshare_pickups_covid:{name:"Rideshare Pickups Since March 2020",units:"trips",format:o.numberInMillions,fullFormat:o.numberWithCommas},rideshare_pooled_trip_rate_2018:{name:"2018 Rideshare Pooled Trip Rate",units:"of trips",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},rideshare_pooled_trip_rate_2019:{name:"2019 Rideshare Pooled Trip Rate",units:"of trips",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},rideshare_pool_request_rate_2018:{name:"2018 Rideshare Pool Request Rate",units:"of trips",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},rideshare_pool_request_rate_2019:{name:"2019 Rideshare Pool Request Rate",units:"of trips",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},total_population_2000:{name:"2000 Total Population",units:"people",format:o.numberInThousands,fullFormat:o.numberWithCommas},total_population_2010:{name:"2010 Total Population",units:"people",format:o.numberInThousands,fullFormat:o.numberWithCommas},total_population_2019:{name:"2019 Total Population",units:"people",format:o.numberInThousands,fullFormat:o.numberWithCommas},median_income_2010:{name:"2010 Median Income",units:"dollars",format:o.dollarsUSD,fullFormat:o.dollarsUSD},median_income_2019:{name:"2019 Median Income",units:"dollars",format:o.dollarsUSD,fullFormat:o.dollarsUSD},total_covid_cases:{name:"Total COVID Cases",units:"cases",format:o.numberInThousands,fullFormat:o.numberWithCommas},disability_rate_2018:{name:"2018 Disability Rate",units:"of people",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},disability_rate_2019:{name:"2019 Disability Rate",units:"of people",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},belonging_rate_2017:{name:"2017 Rate of Belonging",units:"of people",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal},belonging_rate_2018:{name:"2018 Rate of Belonging",units:"of people",format:o.percentWithNoDecimal,fullFormat:o.percentWithOneDecimal}},s={weekly_rideshare_pickups:{name:"Weekly Rideshare Pickups",units:"trips",format:o.numberInThousands,fullFormat:o.numberWithCommas},weekly_rideshare_pickups_covid:{name:"Weekly Rideshare Pickups Since March 2020",units:"trips",format:o.numberInThousands,fullFormat:o.numberWithCommas},weekly_rideshare_avg_cost:{name:"Weekly Rideshare Avg. Cost",units:"USD",format:o.centsToDollarsUSD,fullFormat:o.centsToDollarsUSD},weekly_rideshare_avg_cost_covid:{name:"Weekly Rideshare Avg. Cost Since March 2020",units:"USD",format:o.centsToDollarsUSD,fullFormat:o.centsToDollarsUSD},weekly_covid_cases:{name:"Weekly COVID Cases",units:"cases",format:o.numberWithCommas,fullFormat:o.numberWithCommas}},c={metricX:"total_population_2019",metricY:"total_covid_cases"},l={metricToAdd:"weekly_rideshare_pickups",defaultMetrics:[{id:"weekly_rideshare_pickups",axis:"left"},{id:"weekly_covid_cases",axis:"right"}]}},7277:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questions/[id]",function(){return r(4614)}])}},function(e){e.O(0,[774,351,197,700,9,846],(function(){return t=7277,e(e.s=t);var t}));var t=e.O();_N_E=t}]);